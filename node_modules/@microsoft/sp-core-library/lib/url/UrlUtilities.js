import * as lodash from '@microsoft/sp-lodash-subset';
import Validate from '../Validate';
var URL_PROTOCOL_REGEX = /^\w+\:\/\//;
var BASE64_IMAGE_REGEX = /^data:(\w+\/\w+)?(;charset=[\w-]+)?(;base64)?,.*/i;
var UrlUtilities =  (function () {
    function UrlUtilities() {
    }
    UrlUtilities.resolve = function (url, baseUrl) {
        Validate.isNonemptyString(url, 'url');
        Validate.isNonemptyString(baseUrl, 'baseUrl');
        var isRelativeUrl = UrlUtilities.isRelativeUrl(url);
        if (isRelativeUrl) {
            return UrlUtilities.removeEndSlash(baseUrl) + "/" + UrlUtilities.removeLeadingSlash(url);
        }
        else {
            return url;
        }
    };
    UrlUtilities.removeEndSlash = function (url) {
        return lodash.trimEnd(url, '/');
    };
    UrlUtilities.removeLeadingSlash = function (url) {
        return lodash.trimStart(url, '/');
    };
    UrlUtilities.convertToODataStringLiteral = function (value) {
        Validate.isNotNullOrUndefined(value, 'value');
        value = value.replace(/'/g, "''");
        value = "'" + value + "'";
        return value;
    };
    UrlUtilities.isDataUrl = function (url) {
        Validate.isNotNullOrUndefined(url, 'url');
        return !!url.match(BASE64_IMAGE_REGEX);
    };
    UrlUtilities.isRelativeUrl = function (url) {
        return !url.match(URL_PROTOCOL_REGEX);
    };
    return UrlUtilities;
}());
export default UrlUtilities;
