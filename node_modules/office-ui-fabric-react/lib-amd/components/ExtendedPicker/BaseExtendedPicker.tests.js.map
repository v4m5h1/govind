{"version":3,"file":"BaseExtendedPicker.tests.js","sourceRoot":"../src/","sources":["components/ExtendedPicker/BaseExtendedPicker.tests.tsx"],"names":[],"mappings":"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","sourcesContent":["/* tslint:disable:no-unused-variable */\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport * as ReactTestUtils from 'react-dom/test-utils';\n/* tslint:enable:no-unused-variable */\nimport * as renderer from 'react-test-renderer';\n\nimport { IBaseExtendedPickerProps } from './BaseExtendedPicker.types';\nimport { BaseExtendedPicker } from './BaseExtendedPicker';\nimport { IBaseFloatingPickerProps, BaseFloatingPicker, SuggestionsStore } from '../FloatingPicker/index';\nimport { IBaseSelectedItemsListProps, ISelectedItemProps, BaseSelectedItemsList } from '../SelectedItemsList/index';\nimport { KeyCodes } from '../../Utilities';\n\nfunction onResolveSuggestions(text: string): ISimple[] {\n  return [\n    'black',\n    'blue',\n    'brown',\n    'cyan',\n    'green',\n    'magenta',\n    'mauve',\n    'orange',\n    'pink',\n    'purple',\n    'red',\n    'rose',\n    'violet',\n    'white',\n    'yellow'\n  ]\n    .filter((tag: string) => tag.toLowerCase().indexOf(text.toLowerCase()) === 0)\n    .map((item: string) => ({ key: item, name: item }));\n}\n\nconst BasePickerWithType = BaseFloatingPicker as new (props: IBaseFloatingPickerProps<ISimple>) => BaseFloatingPicker<\n  ISimple,\n  IBaseFloatingPickerProps<ISimple>\n>;\n\nconst BaseSelectedItemsListWithType = BaseSelectedItemsList as new (props: IBaseSelectedItemsListProps<ISimple>) => BaseSelectedItemsList<\n  ISimple,\n  IBaseSelectedItemsListProps<ISimple>\n>;\n\nconst basicSuggestionRenderer = (props: ISimple) => {\n  return <div> {props.name} </div>;\n};\n\nconst basicItemRenderer = (props: ISelectedItemProps<ISimple>) => {\n  return <div> {props.name} </div>;\n};\n\nconst basicRenderFloatingPicker = (props: IBaseFloatingPickerProps<ISimple>) => {\n  return <BasePickerWithType {...props} />;\n};\n\nconst basicRenderSelectedItemsList = (props: IBaseSelectedItemsListProps<ISimple>) => {\n  return <BaseSelectedItemsListWithType />;\n};\n\nconst floatingPickerProps = {\n  onResolveSuggestions: onResolveSuggestions,\n  onRenderSuggestionsItem: basicSuggestionRenderer,\n  suggestionsStore: new SuggestionsStore<ISimple>()\n};\n\nconst selectedItemsListProps: IBaseSelectedItemsListProps<ISimple> = {\n  onRenderItem: basicItemRenderer\n};\n\nexport interface ISimple {\n  key: string;\n  name: string;\n}\n\nexport type TypedBaseExtendedPicker = BaseExtendedPicker<ISimple, IBaseExtendedPickerProps<ISimple>>;\n\ndescribe('Pickers', () => {\n  describe('BasePicker', () => {\n    const BaseExtendedPickerWithType = BaseExtendedPicker as new (props: IBaseExtendedPickerProps<ISimple>) => BaseExtendedPicker<\n      ISimple,\n      IBaseExtendedPickerProps<ISimple>\n    >;\n\n    it('renders BaseExtendedPicker correctly', () => {\n      const component = renderer.create(\n        <BaseExtendedPickerWithType\n          floatingPickerProps={floatingPickerProps}\n          selectedItemsListProps={selectedItemsListProps}\n          onRenderSelectedItems={basicRenderSelectedItemsList}\n          onRenderFloatingPicker={basicRenderFloatingPicker}\n        />\n      );\n      const tree = component.toJSON();\n      expect(tree).toMatchSnapshot();\n    });\n\n    it('force resolves to the first suggestion', () => {\n      const root = document.createElement('div');\n      document.body.appendChild(root);\n\n      const picker: TypedBaseExtendedPicker = ReactDOM.render(\n        <BaseExtendedPickerWithType\n          floatingPickerProps={floatingPickerProps}\n          selectedItemsListProps={selectedItemsListProps}\n          onRenderSelectedItems={basicRenderSelectedItemsList}\n          onRenderFloatingPicker={basicRenderFloatingPicker}\n        />,\n        root\n      ) as TypedBaseExtendedPicker;\n\n      if (picker.inputElement) {\n        picker.inputElement.value = 'bl';\n      }\n\n      expect(picker.floatingPicker.current && picker.floatingPicker.current.suggestions.length).toBe(2);\n      expect(picker.floatingPicker.current && picker.floatingPicker.current.suggestions[0].name).toBe('black');\n\n      // Force resolve to the first suggestions\n      picker.floatingPicker.current && picker.floatingPicker.current.forceResolveSuggestion();\n      expect(picker.items.length).toBe(1);\n      expect(picker.items[0].name).toBe('black');\n\n      ReactDOM.unmountComponentAtNode(root);\n    });\n\n    it('Can hide and show picker', () => {\n      const root = document.createElement('div');\n      document.body.appendChild(root);\n\n      const picker: TypedBaseExtendedPicker = ReactDOM.render(\n        <BaseExtendedPickerWithType\n          floatingPickerProps={floatingPickerProps}\n          selectedItemsListProps={selectedItemsListProps}\n          onRenderSelectedItems={basicRenderSelectedItemsList}\n          onRenderFloatingPicker={basicRenderFloatingPicker}\n        />,\n        root\n      ) as TypedBaseExtendedPicker;\n\n      if (picker.inputElement) {\n        picker.inputElement.value = 'bl';\n      }\n\n      expect(picker.floatingPicker.current && picker.floatingPicker.current.isSuggestionsShown).toBeTruthy();\n      picker.floatingPicker.current && picker.floatingPicker.current.hidePicker();\n      expect(picker.floatingPicker.current && picker.floatingPicker.current.isSuggestionsShown).toBeFalsy();\n      picker.floatingPicker.current && picker.floatingPicker.current.showPicker();\n      expect(picker.floatingPicker.current && picker.floatingPicker.current.isSuggestionsShown).toBeTruthy();\n\n      ReactDOM.unmountComponentAtNode(root);\n    });\n\n    it('Completes the suggestion', () => {\n      const root = document.createElement('div');\n      document.body.appendChild(root);\n\n      const picker: TypedBaseExtendedPicker = ReactDOM.render(\n        <BaseExtendedPickerWithType\n          floatingPickerProps={floatingPickerProps}\n          selectedItemsListProps={selectedItemsListProps}\n          onRenderSelectedItems={basicRenderSelectedItemsList}\n          onRenderFloatingPicker={basicRenderFloatingPicker}\n        />,\n        root\n      ) as TypedBaseExtendedPicker;\n\n      if (picker.inputElement) {\n        picker.inputElement.value = 'bl';\n        ReactTestUtils.Simulate.keyDown(picker.inputElement, { which: KeyCodes.down });\n      }\n\n      picker.floatingPicker.current && picker.floatingPicker.current.completeSuggestion();\n      expect(picker.selectedItemsList.current && picker.selectedItemsList.current.items.length).toBe(1);\n      expect(picker.selectedItemsList.current && picker.selectedItemsList.current.items[0].name).toBe('blue');\n\n      ReactDOM.unmountComponentAtNode(root);\n    });\n  });\n});\n"]}