{"version":3,"file":"PersonaCoin.base.js","sourceRoot":"../src/","sources":["components/Persona/PersonaCoin/PersonaCoin.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport {\r\n  BaseComponent,\r\n  classNamesFunction,\r\n  customizable,\r\n  divProperties,\r\n  getInitials,\r\n  getNativeProps,\r\n  getRTL,\r\n} from '../../../Utilities';\r\nimport { mergeStyles } from '../../../Styling';\r\nimport { PersonaPresence } from '../PersonaPresence/index';\r\nimport {\r\n  Icon\r\n} from '../../../Icon';\r\nimport {\r\n  Image,\r\n  ImageFit,\r\n  ImageLoadState\r\n} from '../../../Image';\r\nimport {\r\n  IPersonaCoinProps,\r\n  IPersonaCoinStyleProps,\r\n  IPersonaCoinStyles,\r\n  IPersonaPresenceProps,\r\n  PersonaPresence as PersonaPresenceEnum,\r\n  PersonaSize,\r\n} from '../Persona.types';\r\nimport { initialsColorPropToColorCode } from '../PersonaInitialsColor';\r\n\r\nconst getClassNames = classNamesFunction<IPersonaCoinStyleProps, IPersonaCoinStyles>();\r\n\r\nconst SIZE_TO_PIXELS: { [key: number]: number } = {\r\n  [PersonaSize.tiny]: 20,\r\n  [PersonaSize.extraExtraSmall]: 24,\r\n  [PersonaSize.extraSmall]: 28,\r\n  [PersonaSize.small]: 40,\r\n  [PersonaSize.regular]: 48,\r\n  [PersonaSize.large]: 72,\r\n  [PersonaSize.extraLarge]: 100,\r\n\r\n  [PersonaSize.size24]: 24,\r\n  [PersonaSize.size28]: 28,\r\n  [PersonaSize.size10]: 20,\r\n  [PersonaSize.size32]: 32,\r\n  [PersonaSize.size40]: 40,\r\n  [PersonaSize.size48]: 48,\r\n  [PersonaSize.size72]: 72,\r\n  [PersonaSize.size100]: 100\r\n};\r\n\r\nexport interface IPersonaState {\r\n  isImageLoaded?: boolean;\r\n  isImageError?: boolean;\r\n}\r\n\r\n/**\r\n * PersonaCoin with no default styles.\r\n * [Use the `getStyles` API to add your own styles.](https://github.com/OfficeDev/office-ui-fabric-react/wiki/Styling)\r\n */\r\n@customizable('PersonaCoin', ['theme'])\r\nexport class PersonaCoinBase extends BaseComponent<IPersonaCoinProps, IPersonaState> {\r\n  public static defaultProps: IPersonaCoinProps = {\r\n    size: PersonaSize.size48,\r\n    presence: PersonaPresenceEnum.none,\r\n    imageAlt: '',\r\n  };\r\n\r\n  constructor(props: IPersonaCoinProps) {\r\n    super(props);\r\n\r\n    this._warnDeprecations({ 'primaryText': 'text' });\r\n\r\n    this.state = {\r\n      isImageLoaded: false,\r\n      isImageError: false\r\n    };\r\n  }\r\n\r\n  public render(): JSX.Element | null {\r\n    const {\r\n      className,\r\n      coinProps,\r\n      showUnknownPersonaCoin,\r\n      coinSize,\r\n      getStyles,\r\n      imageUrl,\r\n      onRenderCoin = this._onRenderCoin,\r\n      onRenderInitials = this._onRenderInitials,\r\n      presence,\r\n      theme,\r\n    } = this.props;\r\n\r\n    const size = this.props.size as PersonaSize;\r\n    const divProps = getNativeProps(this.props, divProperties);\r\n    const coinSizeStyle = coinSize ? { width: coinSize, height: coinSize } : undefined;\r\n\r\n    const personaPresenceProps: IPersonaPresenceProps = {\r\n      coinSize,\r\n      presence,\r\n      size,\r\n      theme,\r\n    };\r\n\r\n    // Use getStyles from props, or fall back to getStyles from styles file.\r\n    const classNames = getClassNames(getStyles, {\r\n      theme: theme!,\r\n      className: (coinProps && coinProps.className) ? coinProps.className : className,\r\n      size,\r\n      showUnknownPersonaCoin,\r\n    });\r\n\r\n    return (\r\n      <div\r\n        { ...divProps }\r\n        className={ classNames.coin }\r\n      >\r\n\r\n        { // Render PersonaCoin if size is not size10\r\n          (size !== PersonaSize.size10 && size !== PersonaSize.tiny)\r\n            ? (\r\n              <div\r\n                { ...coinProps }\r\n                className={ classNames.imageArea }\r\n                style={ coinSizeStyle }\r\n              >\r\n                {\r\n                  !this.state.isImageLoaded &&\r\n                  (!imageUrl || this.state.isImageError) &&\r\n                  (\r\n                    <div\r\n                      className={ mergeStyles(\r\n                        classNames.initials,\r\n                        !showUnknownPersonaCoin && { backgroundColor: initialsColorPropToColorCode(this.props) }\r\n                      ) }\r\n                      style={ coinSizeStyle }\r\n                      aria-hidden='true'\r\n                    >\r\n                      { onRenderInitials(this.props, this._onRenderInitials) }\r\n                    </div>\r\n                  )\r\n                }\r\n                { onRenderCoin(this.props, this._onRenderCoin) }\r\n                <PersonaPresence { ...personaPresenceProps } />\r\n              </div>\r\n            ) : ( // Otherwise, render just PersonaPresence.\r\n              this.props.presence\r\n                ? <PersonaPresence { ...personaPresenceProps } />\r\n                : // Just render Contact Icon if there isn't a Presence prop.\r\n                <Icon\r\n                  iconName='Contact'\r\n                  className={ classNames.size10WithoutPresenceIcon }\r\n                />\r\n            )\r\n        }\r\n        { this.props.children }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private _onRenderCoin = (props: IPersonaCoinProps): JSX.Element | null => {\r\n    const {\r\n      coinSize,\r\n      getStyles,\r\n      imageUrl,\r\n      imageAlt,\r\n      imageShouldFadeIn,\r\n      imageShouldStartVisible,\r\n      theme,\r\n      showUnknownPersonaCoin,\r\n    } = this.props;\r\n\r\n    // render Image component only if there is a valid imageUrl\r\n    if (!imageUrl) {\r\n      return null;\r\n    }\r\n\r\n    const size = this.props.size as PersonaSize;\r\n\r\n    const classNames = getClassNames(getStyles, {\r\n      theme: theme!,\r\n      size,\r\n      showUnknownPersonaCoin\r\n    });\r\n\r\n    return (\r\n      <Image\r\n        className={ classNames.image }\r\n        imageFit={ ImageFit.cover }\r\n        src={ imageUrl }\r\n        width={ coinSize || SIZE_TO_PIXELS[size] }\r\n        height={ coinSize || SIZE_TO_PIXELS[size] }\r\n        alt={ imageAlt }\r\n        shouldFadeIn={ imageShouldFadeIn }\r\n        shouldStartVisible={ imageShouldStartVisible }\r\n        onLoadingStateChange={ this._onPhotoLoadingStateChange }\r\n      />\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Deprecation helper for getting text.\r\n   */\r\n  private _getText(): string {\r\n    return this.props.text || this.props.primaryText || '';\r\n  }\r\n\r\n  private _onRenderInitials = (props: IPersonaCoinProps): JSX.Element => {\r\n    let { imageInitials } = props;\r\n    const {\r\n      allowPhoneInitials,\r\n      showUnknownPersonaCoin\r\n    } = props;\r\n\r\n    if (showUnknownPersonaCoin) {\r\n      return <Icon iconName='Help' />;\r\n    }\r\n\r\n    const isRTL = getRTL();\r\n\r\n    imageInitials = imageInitials || getInitials(this._getText(), isRTL, allowPhoneInitials);\r\n\r\n    return (\r\n      imageInitials !== ''\r\n        ? <span>{ imageInitials }</span>\r\n        : <Icon iconName='Contact' />\r\n    );\r\n  }\r\n\r\n  private _onPhotoLoadingStateChange = (loadState: ImageLoadState) => {\r\n    this.setState({\r\n      isImageLoaded: loadState === ImageLoadState.loaded,\r\n      isImageError: loadState === ImageLoadState.error\r\n    });\r\n\r\n    this.props.onPhotoLoadingStateChange && this.props.onPhotoLoadingStateChange(loadState);\r\n  }\r\n}\r\n"]}