{"version":3,"file":"MaskedTextField.js","sourceRoot":"../src/","sources":["components/TextField/MaskedTextField/MaskedTextField.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { TextField } from '../TextField';\nimport { ITextField, ITextFieldProps } from '../TextField.types';\nimport { initializeComponentRef, autobind, KeyCodes } from '../../../Utilities';\n\nimport {\n  clearNext,\n  clearPrev,\n  clearRange,\n  DEFAULT_MASK_FORMAT_CHARS,\n  getLeftFormatIndex,\n  getMaskDisplay,\n  getRightFormatIndex,\n  IMaskValue,\n  insertString,\n  parseMask\n} from './inputMask';\n\n/**\n * State for the MaskedTextField component.\n */\nexport interface IMaskedTextFieldState {\n  /**\n   * The mask string formatted with the input value.\n   * This is what is displayed inside the TextField\n   * @example\n   *  `Phone Number: 12_ - 4___`\n   */\n  displayValue: string;\n  /** The index into the rendered value of the first unfilled format character */\n  maskCursorPosition?: number;\n}\n\nexport const DEFAULT_MASK_CHAR = '_';\n\ntype InputChangeType = 'default' | 'backspace' | 'delete' | 'textPasted';\n\nexport class MaskedTextField extends React.Component<ITextFieldProps, IMaskedTextFieldState> implements ITextField {\n  public static defaultProps: ITextFieldProps = {\n    maskChar: DEFAULT_MASK_CHAR,\n    maskFormat: DEFAULT_MASK_FORMAT_CHARS\n  };\n  /**\n   * Tell BaseComponent to bypass resolution of componentRef.\n   */\n  protected _skipComponentRefResolution = true;\n\n  private _textField = React.createRef<ITextField>();\n\n  /**\n   *  An array of data containing information regarding the format characters,\n   *  their indices inside the display text, and their corresponding values.\n   * @example\n   * ```\n   *  [\n   *    { value: '1', displayIndex: 16, format: /[0-9]/ },\n   *    { value: '2', displayIndex: 17, format: /[0-9]/ },\n   *    { displayIndex: 18, format: /[0-9]/ },\n   *    { value: '4', displayIndex: 22, format: /[0-9]/ },\n   *    ...\n   *  ]\n   * ```\n   */\n  private _maskCharData: IMaskValue[];\n  /** True if the TextField is focused */\n  private _isFocused: boolean;\n  /** True if the TextField was not focused and it was clicked into */\n  private _moveCursorOnMouseUp: boolean;\n\n  /** The stored selection data prior to input change events. */\n  private _changeSelectionData: {\n    changeType: InputChangeType;\n    selectionStart: number;\n    selectionEnd: number;\n  } | null;\n\n  constructor(props: ITextFieldProps) {\n    super(props);\n\n    initializeComponentRef(this);\n\n    // Translate mask into charData\n    this._maskCharData = parseMask(props.mask, props.maskFormat);\n    // If an initial value is provided, use it to populate the format chars\n    props.value !== undefined && this.setValue(props.value);\n\n    this._isFocused = false;\n    this._moveCursorOnMouseUp = false;\n\n    this.state = {\n      displayValue: getMaskDisplay(props.mask, this._maskCharData, props.maskChar)\n    };\n  }\n\n  public componentWillReceiveProps(newProps: ITextFieldProps) {\n    if (newProps.mask !== this.props.mask || newProps.value !== this.props.value) {\n      this._maskCharData = parseMask(newProps.mask, newProps.maskFormat);\n      newProps.value !== undefined && this.setValue(newProps.value);\n\n      this.setState({\n        displayValue: getMaskDisplay(newProps.mask, this._maskCharData, newProps.maskChar)\n      });\n    }\n  }\n\n  public componentDidUpdate() {\n    // Move the cursor to the start of the mask format on update\n    if (this.state.maskCursorPosition !== undefined && this._textField.current) {\n      this._textField.current.setSelectionRange(this.state.maskCursorPosition, this.state.maskCursorPosition);\n    }\n  }\n\n  public render() {\n    return (\n      <TextField\n        {...this.props}\n        onFocus={this._onFocus}\n        onBlur={this._onBlur}\n        onMouseDown={this._onMouseDown}\n        onMouseUp={this._onMouseUp}\n        onChange={this._onInputChange}\n        onBeforeChange={this._onBeforeChange}\n        onKeyDown={this._onKeyDown}\n        onPaste={this._onPaste}\n        value={this.state.displayValue}\n        componentRef={this._textField}\n      />\n    );\n  }\n\n  /**\n   * @returns The value of all filled format characters or undefined if not all format characters are filled\n   */\n  public get value(): string | undefined {\n    let value = '';\n\n    for (let i = 0; i < this._maskCharData.length; i++) {\n      if (!this._maskCharData[i].value) {\n        return undefined;\n      }\n      value += this._maskCharData[i].value;\n    }\n    return value;\n  }\n\n  /**\n   *\n   */\n  public setValue(newValue: string): void {\n    let valueIndex = 0,\n      charDataIndex = 0;\n\n    while (valueIndex < newValue.length && charDataIndex < this._maskCharData.length) {\n      // Test if the next character in the new value fits the next format character\n      const testVal = newValue[valueIndex];\n      if (this._maskCharData[charDataIndex].format.test(testVal)) {\n        this._maskCharData[charDataIndex].value = testVal;\n        charDataIndex++;\n      }\n      valueIndex++;\n    }\n  }\n\n  public focus(): void {\n    const { current } = this._textField;\n\n    current && current.focus();\n  }\n\n  public blur(): void {\n    const { current } = this._textField;\n\n    current && current.blur();\n  }\n\n  public select(): void {\n    const { current } = this._textField;\n\n    current && current.select();\n  }\n\n  public setSelectionStart(value: number): void {\n    const { current } = this._textField;\n\n    current && current.setSelectionStart(value);\n  }\n\n  public setSelectionEnd(value: number): void {\n    const { current } = this._textField;\n\n    current && current.setSelectionEnd(value);\n  }\n\n  public setSelectionRange(start: number, end: number): void {\n    const { current } = this._textField;\n    current && current.setSelectionRange(start, end);\n  }\n\n  public get selectionStart(): number | null {\n    const { current } = this._textField;\n\n    return current && current.selectionStart !== null ? current.selectionStart : -1;\n  }\n\n  public get selectionEnd(): number | null {\n    const { current } = this._textField;\n\n    return current && current.selectionEnd ? current.selectionEnd : -1;\n  }\n\n  @autobind\n  private _onFocus(event: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) {\n    if (this.props.onFocus) {\n      this.props.onFocus(event);\n    }\n\n    this._isFocused = true;\n\n    // Move the cursor position to the leftmost unfilled position\n    for (let i = 0; i < this._maskCharData.length; i++) {\n      if (!this._maskCharData[i].value) {\n        this.setState({\n          maskCursorPosition: this._maskCharData[i].displayIndex\n        });\n        break;\n      }\n    }\n  }\n\n  @autobind\n  private _onBlur(event: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) {\n    if (this.props.onBlur) {\n      this.props.onBlur(event);\n    }\n\n    this._isFocused = false;\n    this._moveCursorOnMouseUp = true;\n  }\n\n  @autobind\n  private _onMouseDown(event: React.MouseEvent<HTMLInputElement>) {\n    if (this.props.onMouseDown) {\n      this.props.onMouseDown(event);\n    }\n\n    if (!this._isFocused) {\n      this._moveCursorOnMouseUp = true;\n    }\n  }\n\n  @autobind\n  private _onMouseUp(event: React.MouseEvent<HTMLInputElement>) {\n    if (this.props.onMouseUp) {\n      this.props.onMouseUp(event);\n    }\n\n    // Move the cursor on mouseUp after focusing the textField\n    if (this._moveCursorOnMouseUp) {\n      this._moveCursorOnMouseUp = false;\n      // Move the cursor position to the rightmost unfilled position\n      for (let i = 0; i < this._maskCharData.length; i++) {\n        if (!this._maskCharData[i].value) {\n          this.setState({\n            maskCursorPosition: this._maskCharData[i].displayIndex\n          });\n          break;\n        }\n      }\n    }\n  }\n\n  @autobind\n  private _onBeforeChange(value: string) {\n    const { current } = this._textField;\n\n    if (this.props.onBeforeChange) {\n      this.props.onBeforeChange(value);\n    }\n\n    if (this._changeSelectionData === null && current) {\n      this._changeSelectionData = {\n        changeType: 'default',\n        selectionStart: current.selectionStart !== null ? current.selectionStart : -1,\n        selectionEnd: current.selectionEnd !== null ? current.selectionEnd : -1\n      };\n    }\n  }\n\n  @autobind\n  private _onInputChange(ev: React.FormEvent<HTMLInputElement | HTMLTextAreaElement>, value: string) {\n    if (!this._changeSelectionData) {\n      return;\n    }\n\n    const { displayValue } = this.state;\n\n    // The initial value of cursorPos does not matter\n    let cursorPos = 0;\n    const { changeType, selectionStart, selectionEnd } = this._changeSelectionData;\n\n    if (changeType === 'textPasted') {\n      const charsSelected = selectionEnd - selectionStart,\n        charCount = value.length + charsSelected - displayValue.length,\n        startPos = selectionStart,\n        pastedString = value.substr(startPos, charCount);\n\n      // Clear any selected characters\n      if (charsSelected) {\n        this._maskCharData = clearRange(this._maskCharData, selectionStart, charsSelected);\n      }\n      cursorPos = insertString(this._maskCharData, startPos, pastedString);\n    } else if (changeType === 'delete' || changeType === 'backspace') {\n      // isDel is true If the characters are removed LTR, otherwise RTL\n      const isDel = changeType === 'delete',\n        charCount = selectionEnd - selectionStart;\n\n      if (charCount) {\n        // charCount is > 0 if range was deleted\n        this._maskCharData = clearRange(this._maskCharData, selectionStart, charCount);\n        cursorPos = getRightFormatIndex(this._maskCharData, selectionStart);\n      } else {\n        // If charCount === 0, there was no selection and a single character was deleted\n        if (isDel) {\n          this._maskCharData = clearNext(this._maskCharData, selectionStart);\n          cursorPos = getRightFormatIndex(this._maskCharData, selectionStart);\n        } else {\n          this._maskCharData = clearPrev(this._maskCharData, selectionStart);\n          cursorPos = getLeftFormatIndex(this._maskCharData, selectionStart);\n        }\n      }\n    } else if (value.length > displayValue.length) {\n      // This case is if the user added characters\n      const charCount = value.length - displayValue.length,\n        startPos = selectionEnd - charCount,\n        enteredString = value.substr(startPos, charCount);\n\n      cursorPos = insertString(this._maskCharData, startPos, enteredString);\n    } else if (value.length <= displayValue.length) {\n      /**\n       * This case is reached only if the user has selected a block of 1 or more\n       * characters and input a character replacing the characters they've selected.\n       */\n      const charCount = 1,\n        selectCount = displayValue.length + charCount - value.length,\n        startPos = selectionEnd - charCount,\n        enteredString = value.substr(startPos, charCount);\n\n      // Clear the selected range\n      this._maskCharData = clearRange(this._maskCharData, startPos, selectCount);\n      // Insert the printed character\n      cursorPos = insertString(this._maskCharData, startPos, enteredString);\n    }\n\n    this._changeSelectionData = null;\n\n    const newValue = getMaskDisplay(this.props.mask, this._maskCharData, this.props.maskChar);\n\n    this.setState({\n      displayValue: newValue,\n      maskCursorPosition: cursorPos\n    });\n\n    // Perform onChange/d after input has been processed. Return value is expected to be the displayed text\n    if (this.props.onChange) {\n      this.props.onChange(ev, newValue);\n    }\n\n    if (this.props.onChanged) {\n      this.props.onChanged(newValue);\n    }\n  }\n\n  @autobind\n  private _onKeyDown(event: React.KeyboardEvent<HTMLInputElement>) {\n    const { current } = this._textField;\n\n    if (this.props.onKeyDown) {\n      this.props.onKeyDown(event);\n    }\n\n    this._changeSelectionData = null;\n    if (current && current.value) {\n      const { keyCode, ctrlKey, metaKey } = event;\n\n      // Ignore ctrl and meta keydown\n      if (ctrlKey || metaKey) {\n        return;\n      }\n\n      // On backspace or delete, store the selection and the keyCode\n      if (keyCode === KeyCodes.backspace || keyCode === KeyCodes.del) {\n        const selectionStart = (event.target as HTMLInputElement).selectionStart,\n          selectionEnd = (event.target as HTMLInputElement).selectionEnd;\n\n        // Check if backspace or delete press is valid.\n        if (\n          !(keyCode === KeyCodes.backspace && selectionEnd && selectionEnd > 0) &&\n          !(keyCode === KeyCodes.del && selectionStart !== null && selectionStart < current.value.length)\n        ) {\n          return;\n        }\n\n        this._changeSelectionData = {\n          changeType: keyCode === KeyCodes.backspace ? 'backspace' : 'delete',\n          selectionStart: selectionStart !== null ? selectionStart : -1,\n          selectionEnd: selectionEnd !== null ? selectionEnd : -1\n        };\n      }\n    }\n  }\n\n  @autobind\n  private _onPaste(event: React.ClipboardEvent<HTMLInputElement>) {\n    if (this.props.onPaste) {\n      this.props.onPaste(event);\n    }\n\n    const selectionStart = (event.target as HTMLInputElement).selectionStart,\n      selectionEnd = (event.target as HTMLInputElement).selectionEnd;\n    // Store the paste selection range\n    this._changeSelectionData = {\n      changeType: 'textPasted',\n      selectionStart: selectionStart !== null ? selectionStart : -1,\n      selectionEnd: selectionEnd !== null ? selectionEnd : -1\n    };\n  }\n}\n"]}