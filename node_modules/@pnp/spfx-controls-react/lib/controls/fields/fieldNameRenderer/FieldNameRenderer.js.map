{"version":3,"sources":["controls/fields/fieldNameRenderer/FieldNameRenderer.tsx"],"names":[],"mappings":"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","file":"controls/fields/fieldNameRenderer/FieldNameRenderer.js","sourcesContent":["import { override } from '@microsoft/decorators';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\n\nimport { css } from 'office-ui-fabric-react/lib/Utilities';\nimport { Icon } from 'office-ui-fabric-react/lib/Icon';\nimport { Link } from 'office-ui-fabric-react/lib/Link';\n\nimport { FieldBaseTextRenderer } from '../fieldBaseTextRenderer/FieldBaseTextRenderer';\nimport { IFieldRendererProps } from '../fieldCommon/IFieldRendererProps';\nimport * as telemetry from '../../../common/telemetry';\n\nimport styles from './FieldNameRenderer.module.scss';\n\nexport interface IFieldNameRendererProps extends IFieldRendererProps {\n    /**\n     * text to display\n     */\n    text?: string;\n    /**\n     * if the Name should be rendered as link\n     */\n    isLink: boolean;\n    /**\n     * path to the document\n     */\n    filePath?: string;\n    /**\n     * true if the document is new\n     */\n    isNew?: boolean;\n    /**\n     * true if the document type has preview (true by default).\n     * The flag impacts on the link's href: \n     * if the flag is tru then the href is constructed like #id=${filePath}&parent=${filePath.substring(0, filePath.lastIndexOf('/'))},\n     * otherwise the href will contain filePath only.\n     */\n    hasPreview?: boolean;\n    /**\n     * custom handler for link click. If not set link click will lead to rendering document preview\n     */\n    onClick?: (args: IFieldNameClickEventArgs) => {};\n    /**\n     * custom handler for link double click. If not set link will use OOTB behavior.\n     */\n    onDoubleClick?: (args: IFieldNameClickEventArgs) => {};\n}\n\n/**\n * For future\n */\nexport interface IFieldNameRendererState {\n\n}\n\n/**\n * Name click event arguments\n */\nexport interface IFieldNameClickEventArgs {\n    filePath?: string;\n}\n\n/**\n * Field Title Renderer.\n * Used for:\n *   - Title\n */\nexport class FieldNameRenderer extends React.Component<IFieldNameRendererProps, IFieldNameRendererState> {\n    private _button: HTMLButtonElement;\n\n    public constructor(props: IFieldNameRendererProps, state: IFieldNameRendererState) {\n        super(props, state);\n\n        telemetry.track('FieldNameRenderer', {});\n\n        this.state = {};\n\n        this._onDoubleClick = this._onDoubleClick.bind(this);\n    }\n\n    @override\n    public componentDidMount() {\n        //\n        // small hack for double click.\n        // unfortunately, we can't use React onDoubleClick because React doesn't guaranty the sequence of handlers.\n        // And stopPropagation could not make effect.\n        //\n        if (this.props.onDoubleClick && this.props.isLink) {\n            const domNode = ReactDOM.findDOMNode(this);\n            this._button = domNode.querySelector('button');\n            this._button.addEventListener('dblclick', this._onDoubleClick, false);\n        }\n    }\n\n    @override\n    public componentWillUnmount() {\n        if (this._button) {\n            this._button.removeEventListener('dblclick', this._onDoubleClick);\n        }\n    }\n\n    @override\n    public render(): JSX.Element {\n        const isLink: boolean = this.props.isLink;\n        //\n        // for now only signal for New documents is implemented\n        //\n        let signal: JSX.Element = this.props.isNew ? <span className={css(styles.signal, styles.newItem)}><Icon iconName={'Glimmer'} className={css(styles.newIcon)} /></span> : null;\n        let value: JSX.Element;\n\n        if (isLink) {\n            if (this.props.onClick) {\n                value = <Link\n                    onClick={this._onClick.bind(this)}\n                    style={this.props.cssProps}\n                    className={styles.value}>{this.props.text}</Link>;\n            }\n            else {\n                let url: string;\n                const filePath = this.props.filePath;\n                if (this.props.hasPreview !== false) {\n                    url = `#id=${filePath}&parent=${filePath.substring(0, filePath.lastIndexOf('/'))}`;\n                }\n                else {\n                    url = filePath;\n                }\n\n                value = <Link href={url} style={this.props.cssProps} className={styles.value}>{this.props.text}</Link>;\n            }\n        }\n        else {\n            value = <FieldBaseTextRenderer cssProps={this.props.cssProps} text={this.props.text} />;\n        }\n\n        return <span className={css(styles.signalField, this.props.className)} style={this.props.cssProps}>\n            {signal}\n            <span className={styles.signalFieldValue}>\n                {value}\n            </span>\n        </span>;\n    }\n\n    private _onClick(e): boolean {\n        if (this.props.onClick) {\n            e.stopPropagation();\n            e.preventDefault();\n            const args: IFieldNameClickEventArgs = this.props as IFieldNameClickEventArgs;\n            this.props.onClick(args);\n            return false;\n        }\n    }\n\n    private _onDoubleClick(e): boolean {\n        if (this.props.onDoubleClick) {\n            e.stopPropagation();\n            e.preventDefault();\n            const args: IFieldNameClickEventArgs = this.props as IFieldNameClickEventArgs;\n            this.props.onDoubleClick(args);\n            return false;\n        }\n    }\n}\n"],"sourceRoot":"../../../../src"}