{"version":3,"file":"ApiModelGenerator.js","sourceRoot":"","sources":["../../src/generators/ApiModelGenerator.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\r\n// See LICENSE in the project root for license information.\r\n\r\n// tslint:disable:no-bitwise\r\n\r\nimport * as ts from 'typescript';\r\nimport * as tsdoc from '@microsoft/tsdoc';\r\nimport {\r\n  ApiModel,\r\n  ApiClass,\r\n  ApiPackage,\r\n  ApiEntryPoint,\r\n  ApiMethod,\r\n  ApiNamespace,\r\n  ApiInterface,\r\n  ApiPropertySignature,\r\n  ApiItemContainerMixin,\r\n  ReleaseTag,\r\n  ApiProperty,\r\n  ApiMethodSignature,\r\n  IApiParameterOptions,\r\n  ApiEnum,\r\n  ApiEnumMember,\r\n  IExcerptTokenRange,\r\n  IExcerptToken,\r\n  ApiConstructor,\r\n  ApiConstructSignature,\r\n  ApiFunction,\r\n  ApiIndexSignature,\r\n  ApiVariable,\r\n  ApiTypeAlias,\r\n  ApiCallSignature\r\n} from '@microsoft/api-extractor-model';\r\n\r\nimport { Collector } from '../collector/Collector';\r\nimport { AstDeclaration } from '../analyzer/AstDeclaration';\r\nimport { ExcerptBuilder, IExcerptBuilderNodeToCapture } from './ExcerptBuilder';\r\nimport { AstSymbol } from '../analyzer/AstSymbol';\r\n\r\nexport class ApiModelGenerator {\r\n  private readonly _collector: Collector;\r\n  private readonly _cachedOverloadIndexesByDeclaration: Map<AstDeclaration, number>;\r\n  private readonly _apiModel: ApiModel;\r\n\r\n  public constructor(collector: Collector) {\r\n    this._collector = collector;\r\n    this._cachedOverloadIndexesByDeclaration = new Map<AstDeclaration, number>();\r\n    this._apiModel = new ApiModel();\r\n  }\r\n\r\n  public get apiModel(): ApiModel {\r\n    return this._apiModel;\r\n  }\r\n\r\n  public buildApiPackage(): ApiPackage {\r\n    const packageDocComment: tsdoc.DocComment | undefined = this._collector.workingPackage.tsdocComment;\r\n\r\n    const apiPackage: ApiPackage = new ApiPackage({\r\n      name: this._collector.workingPackage.name,\r\n      docComment: packageDocComment\r\n    });\r\n    this._apiModel.addMember(apiPackage);\r\n\r\n    const apiEntryPoint: ApiEntryPoint = new ApiEntryPoint({ name: '' });\r\n    apiPackage.addMember(apiEntryPoint);\r\n\r\n    // Create a CollectorEntity for each top-level export\r\n    for (const entity of this._collector.entities) {\r\n      if (entity.exported) {\r\n        if (entity.astEntity instanceof AstSymbol) {\r\n          for (const astDeclaration of entity.astEntity.astDeclarations) {\r\n            this._processDeclaration(astDeclaration, entity.nameForEmit, apiEntryPoint);\r\n          }\r\n        } else {\r\n          // TODO: Figure out how to represent reexported AstImport objects.  Basically we need to introduce a new\r\n          // ApiItem subclass for \"export alias\", similar to a type alias, but representing declarations of the\r\n          // form \"export { X } from 'external-package'\".  We can also use this to solve GitHub issue #950.\r\n        }\r\n      }\r\n    }\r\n\r\n    return apiPackage;\r\n  }\r\n\r\n  private _processDeclaration(astDeclaration: AstDeclaration, exportedName: string | undefined,\r\n    parentApiItem: ApiItemContainerMixin): void {\r\n\r\n    if ((astDeclaration.modifierFlags & ts.ModifierFlags.Private) !== 0) {\r\n      return; // trim out private declarations\r\n    }\r\n\r\n    const releaseTag: ReleaseTag = this._collector.fetchMetadata(astDeclaration.astSymbol).releaseTag;\r\n    if (releaseTag === ReleaseTag.Internal || releaseTag === ReleaseTag.Alpha) {\r\n      return; // trim out items marked as \"@internal\" or \"@alpha\"\r\n    }\r\n\r\n    switch (astDeclaration.declaration.kind) {\r\n      case ts.SyntaxKind.CallSignature:\r\n        this._processApiCallSignature(astDeclaration, exportedName, parentApiItem);\r\n        break;\r\n\r\n      case ts.SyntaxKind.Constructor:\r\n        this._processApiConstructor(astDeclaration, exportedName, parentApiItem);\r\n        break;\r\n\r\n      case ts.SyntaxKind.ConstructSignature:\r\n        this._processApiConstructSignature(astDeclaration, exportedName, parentApiItem);\r\n        break;\r\n\r\n      case ts.SyntaxKind.ClassDeclaration:\r\n        this._processApiClass(astDeclaration, exportedName, parentApiItem);\r\n        break;\r\n\r\n      case ts.SyntaxKind.EnumDeclaration:\r\n        this._processApiEnum(astDeclaration, exportedName, parentApiItem);\r\n        break;\r\n\r\n      case ts.SyntaxKind.EnumMember:\r\n        this._processApiEnumMember(astDeclaration, exportedName, parentApiItem);\r\n        break;\r\n\r\n      case ts.SyntaxKind.FunctionDeclaration:\r\n        this._processApiFunction(astDeclaration, exportedName, parentApiItem);\r\n        break;\r\n\r\n      case ts.SyntaxKind.IndexSignature:\r\n        this._processApiIndexSignature(astDeclaration, exportedName, parentApiItem);\r\n        break;\r\n\r\n      case ts.SyntaxKind.InterfaceDeclaration:\r\n        this._processApiInterface(astDeclaration, exportedName, parentApiItem);\r\n        break;\r\n\r\n      case ts.SyntaxKind.MethodDeclaration:\r\n        this._processApiMethod(astDeclaration, exportedName, parentApiItem);\r\n        break;\r\n\r\n      case ts.SyntaxKind.MethodSignature:\r\n        this._processApiMethodSignature(astDeclaration, exportedName, parentApiItem);\r\n        break;\r\n\r\n      case ts.SyntaxKind.ModuleDeclaration:\r\n        this._processApiNamespace(astDeclaration, exportedName, parentApiItem);\r\n        break;\r\n\r\n      case ts.SyntaxKind.PropertyDeclaration:\r\n        this._processApiProperty(astDeclaration, exportedName, parentApiItem);\r\n        break;\r\n\r\n      case ts.SyntaxKind.PropertySignature:\r\n        this._processApiPropertySignature(astDeclaration, exportedName, parentApiItem);\r\n        break;\r\n\r\n      case ts.SyntaxKind.TypeAliasDeclaration:\r\n        this._processApiTypeAlias(astDeclaration, exportedName, parentApiItem);\r\n        break;\r\n\r\n      case ts.SyntaxKind.VariableDeclaration:\r\n        this._processApiVariable(astDeclaration, exportedName, parentApiItem);\r\n        break;\r\n\r\n      default:\r\n        // ignore unknown types\r\n    }\r\n  }\r\n\r\n  private _processChildDeclarations(astDeclaration: AstDeclaration, exportedName: string | undefined,\r\n    parentApiItem: ApiItemContainerMixin): void {\r\n    for (const childDeclaration of astDeclaration.children) {\r\n      this._processDeclaration(childDeclaration, undefined, parentApiItem);\r\n    }\r\n  }\r\n\r\n  private _processApiCallSignature(astDeclaration: AstDeclaration, exportedName: string | undefined,\r\n    parentApiItem: ApiItemContainerMixin): void {\r\n\r\n    const overloadIndex: number = this._getOverloadIndex(astDeclaration);\r\n    const canonicalReference: string = ApiCallSignature.getCanonicalReference(overloadIndex);\r\n\r\n    let apiCallSignature: ApiCallSignature | undefined = parentApiItem.tryGetMember(canonicalReference) as\r\n    ApiCallSignature;\r\n\r\n    if (apiCallSignature === undefined) {\r\n      const callSignature: ts.CallSignatureDeclaration = astDeclaration.declaration as ts.CallSignatureDeclaration;\r\n\r\n      const nodesToCapture: IExcerptBuilderNodeToCapture[] = [];\r\n\r\n      const returnTypeTokenRange: IExcerptTokenRange = ExcerptBuilder.createEmptyTokenRange();\r\n      nodesToCapture.push({ node: callSignature.type, tokenRange: returnTypeTokenRange });\r\n\r\n      const parameters: IApiParameterOptions[] = this._captureParameters(nodesToCapture, callSignature.parameters);\r\n\r\n      const excerptTokens: IExcerptToken[] = ExcerptBuilder.build({\r\n        startingNode: astDeclaration.declaration,\r\n        nodesToCapture\r\n      });\r\n      const docComment: tsdoc.DocComment | undefined = this._collector.fetchMetadata(astDeclaration).tsdocComment;\r\n      const releaseTag: ReleaseTag = this._collector.fetchMetadata(astDeclaration.astSymbol).releaseTag;\r\n\r\n      apiCallSignature = new ApiCallSignature({ docComment, releaseTag, parameters, overloadIndex,\r\n        excerptTokens, returnTypeTokenRange });\r\n\r\n      parentApiItem.addMember(apiCallSignature);\r\n    }\r\n  }\r\n\r\n  private _processApiConstructor(astDeclaration: AstDeclaration, exportedName: string | undefined,\r\n    parentApiItem: ApiItemContainerMixin): void {\r\n\r\n    const isStatic: boolean = (astDeclaration.modifierFlags & ts.ModifierFlags.Static) !== 0;\r\n    const overloadIndex: number = this._getOverloadIndex(astDeclaration);\r\n    const canonicalReference: string = ApiConstructor.getCanonicalReference(isStatic, overloadIndex);\r\n\r\n    let apiConstructor: ApiConstructor | undefined = parentApiItem.tryGetMember(canonicalReference) as ApiConstructor;\r\n\r\n    if (apiConstructor === undefined) {\r\n      const constructorDeclaration: ts.ConstructorDeclaration = astDeclaration.declaration as ts.ConstructorDeclaration;\r\n\r\n      const nodesToCapture: IExcerptBuilderNodeToCapture[] = [];\r\n\r\n      const parameters: IApiParameterOptions[] = this._captureParameters(nodesToCapture,\r\n        constructorDeclaration.parameters);\r\n\r\n      const excerptTokens: IExcerptToken[] = ExcerptBuilder.build({\r\n        startingNode: astDeclaration.declaration,\r\n        nodesToCapture\r\n      });\r\n\r\n      const docComment: tsdoc.DocComment | undefined = this._collector.fetchMetadata(astDeclaration).tsdocComment;\r\n      const releaseTag: ReleaseTag = this._collector.fetchMetadata(astDeclaration.astSymbol).releaseTag;\r\n\r\n      apiConstructor = new ApiConstructor({ docComment, releaseTag, isStatic, parameters, overloadIndex,\r\n        excerptTokens });\r\n\r\n      parentApiItem.addMember(apiConstructor);\r\n    }\r\n  }\r\n\r\n  private _processApiClass(astDeclaration: AstDeclaration, exportedName: string | undefined,\r\n    parentApiItem: ApiItemContainerMixin): void {\r\n\r\n    const name: string = !!exportedName ? exportedName : astDeclaration.astSymbol.localName;\r\n    const canonicalReference: string = ApiClass.getCanonicalReference(name);\r\n\r\n    let apiClass: ApiClass | undefined = parentApiItem.tryGetMember(canonicalReference) as ApiClass;\r\n\r\n    if (apiClass === undefined) {\r\n      const classDeclaration: ts.ClassDeclaration = astDeclaration.declaration as ts.ClassDeclaration;\r\n\r\n      const nodesToCapture: IExcerptBuilderNodeToCapture[] = [];\r\n      let extendsTokenRange: IExcerptTokenRange | undefined = undefined;\r\n      const implementsTokenRanges: IExcerptTokenRange[] = [];\r\n\r\n      for (const heritageClause of classDeclaration.heritageClauses || []) {\r\n        if (heritageClause.token === ts.SyntaxKind.ExtendsKeyword) {\r\n          extendsTokenRange = ExcerptBuilder.createEmptyTokenRange();\r\n          if (heritageClause.types.length > 0) {\r\n            nodesToCapture.push({ node: heritageClause.types[0], tokenRange: extendsTokenRange});\r\n          }\r\n        } else if (heritageClause.token === ts.SyntaxKind.ImplementsKeyword) {\r\n          for (const heritageType of heritageClause.types) {\r\n            const implementsTokenRange: IExcerptTokenRange = ExcerptBuilder.createEmptyTokenRange();\r\n            implementsTokenRanges.push(implementsTokenRange);\r\n            nodesToCapture.push({ node: heritageType, tokenRange: implementsTokenRange});\r\n          }\r\n        }\r\n      }\r\n\r\n      const excerptTokens: IExcerptToken[] = ExcerptBuilder.build({\r\n        startingNode: astDeclaration.declaration,\r\n        nodeToStopAt: ts.SyntaxKind.FirstPunctuation,  // FirstPunctuation = \"{\"\r\n        nodesToCapture\r\n      });\r\n      const docComment: tsdoc.DocComment | undefined = this._collector.fetchMetadata(astDeclaration).tsdocComment;\r\n      const releaseTag: ReleaseTag = this._collector.fetchMetadata(astDeclaration.astSymbol).releaseTag;\r\n\r\n      apiClass = new ApiClass({ name, docComment, releaseTag,\r\n        excerptTokens, extendsTokenRange, implementsTokenRanges });\r\n\r\n      parentApiItem.addMember(apiClass);\r\n    }\r\n\r\n    this._processChildDeclarations(astDeclaration, exportedName, apiClass);\r\n  }\r\n\r\n  private _processApiConstructSignature(astDeclaration: AstDeclaration, exportedName: string | undefined,\r\n    parentApiItem: ApiItemContainerMixin): void {\r\n\r\n    const overloadIndex: number = this._getOverloadIndex(astDeclaration);\r\n    const canonicalReference: string = ApiConstructSignature.getCanonicalReference(overloadIndex);\r\n\r\n    let apiConstructSignature: ApiConstructSignature | undefined = parentApiItem.tryGetMember(canonicalReference) as\r\n      ApiConstructSignature;\r\n\r\n    if (apiConstructSignature === undefined) {\r\n      const constructSignature: ts.ConstructSignatureDeclaration = astDeclaration.declaration as\r\n        ts.ConstructSignatureDeclaration;\r\n\r\n      const nodesToCapture: IExcerptBuilderNodeToCapture[] = [];\r\n\r\n      const returnTypeTokenRange: IExcerptTokenRange = ExcerptBuilder.createEmptyTokenRange();\r\n      nodesToCapture.push({ node: constructSignature.type, tokenRange: returnTypeTokenRange });\r\n\r\n      const parameters: IApiParameterOptions[] = this._captureParameters(nodesToCapture, constructSignature.parameters);\r\n\r\n      const excerptTokens: IExcerptToken[] = ExcerptBuilder.build({\r\n        startingNode: astDeclaration.declaration,\r\n        nodesToCapture\r\n      });\r\n      const docComment: tsdoc.DocComment | undefined = this._collector.fetchMetadata(astDeclaration).tsdocComment;\r\n      const releaseTag: ReleaseTag = this._collector.fetchMetadata(astDeclaration.astSymbol).releaseTag;\r\n\r\n      apiConstructSignature = new ApiConstructSignature({ docComment, releaseTag, parameters, overloadIndex,\r\n        excerptTokens, returnTypeTokenRange });\r\n\r\n      parentApiItem.addMember(apiConstructSignature);\r\n    }\r\n  }\r\n\r\n  private _processApiEnum(astDeclaration: AstDeclaration, exportedName: string | undefined,\r\n    parentApiItem: ApiItemContainerMixin): void {\r\n\r\n    const name: string = !!exportedName ? exportedName : astDeclaration.astSymbol.localName;\r\n    const canonicalReference: string = ApiEnum.getCanonicalReference(name);\r\n\r\n    let apiEnum: ApiEnum | undefined = parentApiItem.tryGetMember(canonicalReference) as ApiEnum;\r\n\r\n    if (apiEnum === undefined) {\r\n      const excerptTokens: IExcerptToken[] = ExcerptBuilder.build({\r\n        startingNode: astDeclaration.declaration,\r\n        nodeToStopAt: ts.SyntaxKind.FirstPunctuation  // FirstPunctuation = \"{\"\r\n      });\r\n\r\n      const docComment: tsdoc.DocComment | undefined = this._collector.fetchMetadata(astDeclaration).tsdocComment;\r\n      const releaseTag: ReleaseTag = this._collector.fetchMetadata(astDeclaration.astSymbol).releaseTag;\r\n\r\n      apiEnum = new ApiEnum({ name, docComment, releaseTag, excerptTokens });\r\n      parentApiItem.addMember(apiEnum);\r\n    }\r\n\r\n    this._processChildDeclarations(astDeclaration, exportedName, apiEnum);\r\n  }\r\n\r\n  private _processApiEnumMember(astDeclaration: AstDeclaration, exportedName: string | undefined,\r\n    parentApiItem: ApiItemContainerMixin): void {\r\n\r\n    const name: string = !!exportedName ? exportedName : astDeclaration.astSymbol.localName;\r\n    const canonicalReference: string = ApiEnumMember.getCanonicalReference(name);\r\n\r\n    let apiEnumMember: ApiEnumMember | undefined = parentApiItem.tryGetMember(canonicalReference) as ApiEnumMember;\r\n\r\n    if (apiEnumMember === undefined) {\r\n      const enumMember: ts.EnumMember = astDeclaration.declaration as ts.EnumMember;\r\n\r\n      const nodesToCapture: IExcerptBuilderNodeToCapture[] = [];\r\n\r\n      const initializerTokenRange: IExcerptTokenRange = ExcerptBuilder.createEmptyTokenRange();\r\n      nodesToCapture.push({ node: enumMember.initializer, tokenRange: initializerTokenRange });\r\n\r\n      const excerptTokens: IExcerptToken[] = ExcerptBuilder.build({\r\n        startingNode: astDeclaration.declaration,\r\n        nodesToCapture\r\n      });\r\n\r\n      const docComment: tsdoc.DocComment | undefined = this._collector.fetchMetadata(astDeclaration).tsdocComment;\r\n      const releaseTag: ReleaseTag = this._collector.fetchMetadata(astDeclaration.astSymbol).releaseTag;\r\n\r\n      apiEnumMember = new ApiEnumMember({ name, docComment, releaseTag,\r\n        excerptTokens, initializerTokenRange });\r\n\r\n      parentApiItem.addMember(apiEnumMember);\r\n    }\r\n  }\r\n\r\n  private _processApiFunction(astDeclaration: AstDeclaration, exportedName: string | undefined,\r\n    parentApiItem: ApiItemContainerMixin): void {\r\n\r\n    const name: string = !!exportedName ? exportedName : astDeclaration.astSymbol.localName;\r\n\r\n    const overloadIndex: number = this._getOverloadIndex(astDeclaration);\r\n    const canonicalReference: string = ApiFunction.getCanonicalReference(name, overloadIndex);\r\n\r\n    let apiFunction: ApiFunction | undefined = parentApiItem.tryGetMember(canonicalReference) as\r\n      ApiFunction;\r\n\r\n    if (apiFunction === undefined) {\r\n      const functionDeclaration: ts.FunctionDeclaration = astDeclaration.declaration as ts.FunctionDeclaration;\r\n\r\n      const nodesToCapture: IExcerptBuilderNodeToCapture[] = [];\r\n\r\n      const returnTypeTokenRange: IExcerptTokenRange = ExcerptBuilder.createEmptyTokenRange();\r\n      nodesToCapture.push({ node: functionDeclaration.type, tokenRange: returnTypeTokenRange });\r\n\r\n      const parameters: IApiParameterOptions[] = this._captureParameters(nodesToCapture,\r\n        functionDeclaration.parameters);\r\n\r\n      const excerptTokens: IExcerptToken[] = ExcerptBuilder.build({\r\n        startingNode: astDeclaration.declaration,\r\n        nodesToCapture\r\n      });\r\n      const docComment: tsdoc.DocComment | undefined = this._collector.fetchMetadata(astDeclaration).tsdocComment;\r\n      const releaseTag: ReleaseTag = this._collector.fetchMetadata(astDeclaration.astSymbol).releaseTag;\r\n\r\n      apiFunction = new ApiFunction({ name, docComment, releaseTag, parameters, overloadIndex,\r\n        excerptTokens, returnTypeTokenRange });\r\n\r\n      parentApiItem.addMember(apiFunction);\r\n    }\r\n  }\r\n\r\n  private _processApiIndexSignature(astDeclaration: AstDeclaration, exportedName: string | undefined,\r\n    parentApiItem: ApiItemContainerMixin): void {\r\n\r\n    const overloadIndex: number = this._getOverloadIndex(astDeclaration);\r\n    const canonicalReference: string = ApiIndexSignature.getCanonicalReference(overloadIndex);\r\n\r\n    let apiIndexSignature: ApiIndexSignature | undefined = parentApiItem.tryGetMember(canonicalReference) as\r\n    ApiIndexSignature;\r\n\r\n    if (apiIndexSignature === undefined) {\r\n      const indexSignature: ts.IndexSignatureDeclaration = astDeclaration.declaration as ts.IndexSignatureDeclaration;\r\n\r\n      const nodesToCapture: IExcerptBuilderNodeToCapture[] = [];\r\n\r\n      const returnTypeTokenRange: IExcerptTokenRange = ExcerptBuilder.createEmptyTokenRange();\r\n      nodesToCapture.push({ node: indexSignature.type, tokenRange: returnTypeTokenRange });\r\n\r\n      const parameters: IApiParameterOptions[] = this._captureParameters(nodesToCapture, indexSignature.parameters);\r\n\r\n      const excerptTokens: IExcerptToken[] = ExcerptBuilder.build({\r\n        startingNode: astDeclaration.declaration,\r\n        nodesToCapture\r\n      });\r\n      const docComment: tsdoc.DocComment | undefined = this._collector.fetchMetadata(astDeclaration).tsdocComment;\r\n      const releaseTag: ReleaseTag = this._collector.fetchMetadata(astDeclaration.astSymbol).releaseTag;\r\n\r\n      apiIndexSignature = new ApiIndexSignature({ docComment, releaseTag, parameters, overloadIndex,\r\n        excerptTokens, returnTypeTokenRange });\r\n\r\n      parentApiItem.addMember(apiIndexSignature);\r\n    }\r\n  }\r\n\r\n  private _processApiInterface(astDeclaration: AstDeclaration, exportedName: string | undefined,\r\n    parentApiItem: ApiItemContainerMixin): void {\r\n\r\n    const name: string = !!exportedName ? exportedName : astDeclaration.astSymbol.localName;\r\n    const canonicalReference: string = ApiInterface.getCanonicalReference(name);\r\n\r\n    let apiInterface: ApiInterface | undefined = parentApiItem.tryGetMember(canonicalReference) as ApiInterface;\r\n\r\n    if (apiInterface === undefined) {\r\n      const interfaceDeclaration: ts.InterfaceDeclaration = astDeclaration.declaration as ts.InterfaceDeclaration;\r\n\r\n      const nodesToCapture: IExcerptBuilderNodeToCapture[] = [];\r\n      const extendsTokenRanges: IExcerptTokenRange[] = [];\r\n\r\n      for (const heritageClause of interfaceDeclaration.heritageClauses || []) {\r\n        if (heritageClause.token === ts.SyntaxKind.ExtendsKeyword) {\r\n          for (const heritageType of heritageClause.types) {\r\n            const extendsTokenRange: IExcerptTokenRange = ExcerptBuilder.createEmptyTokenRange();\r\n            extendsTokenRanges.push(extendsTokenRange);\r\n            nodesToCapture.push({ node: heritageType, tokenRange: extendsTokenRange});\r\n          }\r\n        }\r\n      }\r\n\r\n      const excerptTokens: IExcerptToken[] = ExcerptBuilder.build({\r\n        startingNode: astDeclaration.declaration,\r\n        nodeToStopAt: ts.SyntaxKind.FirstPunctuation,  // FirstPunctuation = \"{\"\r\n        nodesToCapture\r\n      });\r\n\r\n      const docComment: tsdoc.DocComment | undefined = this._collector.fetchMetadata(astDeclaration).tsdocComment;\r\n      const releaseTag: ReleaseTag = this._collector.fetchMetadata(astDeclaration.astSymbol).releaseTag;\r\n\r\n      apiInterface = new ApiInterface({ name, docComment, releaseTag, excerptTokens, extendsTokenRanges });\r\n      parentApiItem.addMember(apiInterface);\r\n    }\r\n\r\n    this._processChildDeclarations(astDeclaration, exportedName, apiInterface);\r\n  }\r\n\r\n  private _processApiMethod(astDeclaration: AstDeclaration, exportedName: string | undefined,\r\n    parentApiItem: ApiItemContainerMixin): void {\r\n\r\n    const name: string = !!exportedName ? exportedName : astDeclaration.astSymbol.localName;\r\n\r\n    const isStatic: boolean = (astDeclaration.modifierFlags & ts.ModifierFlags.Static) !== 0;\r\n    const overloadIndex: number = this._getOverloadIndex(astDeclaration);\r\n    const canonicalReference: string = ApiMethod.getCanonicalReference(name, isStatic, overloadIndex);\r\n\r\n    let apiMethod: ApiMethod | undefined = parentApiItem.tryGetMember(canonicalReference) as ApiMethod;\r\n\r\n    if (apiMethod === undefined) {\r\n      const methodDeclaration: ts.MethodDeclaration = astDeclaration.declaration as ts.MethodDeclaration;\r\n\r\n      const nodesToCapture: IExcerptBuilderNodeToCapture[] = [];\r\n\r\n      const returnTypeTokenRange: IExcerptTokenRange = ExcerptBuilder.createEmptyTokenRange();\r\n      nodesToCapture.push({ node: methodDeclaration.type, tokenRange: returnTypeTokenRange });\r\n\r\n      const parameters: IApiParameterOptions[] = this._captureParameters(nodesToCapture, methodDeclaration.parameters);\r\n\r\n      const excerptTokens: IExcerptToken[] = ExcerptBuilder.build({\r\n        startingNode: astDeclaration.declaration,\r\n        nodesToCapture\r\n      });\r\n\r\n      const docComment: tsdoc.DocComment | undefined = this._collector.fetchMetadata(astDeclaration).tsdocComment;\r\n      const releaseTag: ReleaseTag = this._collector.fetchMetadata(astDeclaration.astSymbol).releaseTag;\r\n\r\n      apiMethod = new ApiMethod({ name, docComment, releaseTag, isStatic, parameters, overloadIndex,\r\n        excerptTokens, returnTypeTokenRange });\r\n\r\n      parentApiItem.addMember(apiMethod);\r\n    }\r\n  }\r\n\r\n  private _processApiMethodSignature(astDeclaration: AstDeclaration, exportedName: string | undefined,\r\n    parentApiItem: ApiItemContainerMixin): void {\r\n\r\n    const name: string = !!exportedName ? exportedName : astDeclaration.astSymbol.localName;\r\n\r\n    const overloadIndex: number = this._getOverloadIndex(astDeclaration);\r\n    const canonicalReference: string = ApiMethodSignature.getCanonicalReference(name, overloadIndex);\r\n\r\n    let apiMethodSignature: ApiMethodSignature | undefined = parentApiItem.tryGetMember(canonicalReference) as\r\n      ApiMethodSignature;\r\n\r\n    if (apiMethodSignature === undefined) {\r\n      const methodSignature: ts.MethodSignature = astDeclaration.declaration as ts.MethodSignature;\r\n\r\n      const nodesToCapture: IExcerptBuilderNodeToCapture[] = [];\r\n\r\n      const returnTypeTokenRange: IExcerptTokenRange = ExcerptBuilder.createEmptyTokenRange();\r\n      nodesToCapture.push({ node: methodSignature.type, tokenRange: returnTypeTokenRange });\r\n\r\n      const parameters: IApiParameterOptions[] = this._captureParameters(nodesToCapture, methodSignature.parameters);\r\n\r\n      const excerptTokens: IExcerptToken[] = ExcerptBuilder.build({\r\n        startingNode: astDeclaration.declaration,\r\n        nodesToCapture\r\n      });\r\n      const docComment: tsdoc.DocComment | undefined = this._collector.fetchMetadata(astDeclaration).tsdocComment;\r\n      const releaseTag: ReleaseTag = this._collector.fetchMetadata(astDeclaration.astSymbol).releaseTag;\r\n\r\n      apiMethodSignature = new ApiMethodSignature({ name, docComment, releaseTag, parameters, overloadIndex,\r\n        excerptTokens, returnTypeTokenRange });\r\n\r\n      parentApiItem.addMember(apiMethodSignature);\r\n    }\r\n  }\r\n\r\n  private _processApiNamespace(astDeclaration: AstDeclaration, exportedName: string | undefined,\r\n    parentApiItem: ApiItemContainerMixin): void {\r\n\r\n    const name: string = !!exportedName ? exportedName : astDeclaration.astSymbol.localName;\r\n    const canonicalReference: string = ApiNamespace.getCanonicalReference(name);\r\n\r\n    let apiNamespace: ApiNamespace | undefined = parentApiItem.tryGetMember(canonicalReference) as ApiNamespace;\r\n\r\n    if (apiNamespace === undefined) {\r\n      const excerptTokens: IExcerptToken[] = ExcerptBuilder.build({\r\n        startingNode: astDeclaration.declaration,\r\n        nodeToStopAt: ts.SyntaxKind.ModuleBlock  // ModuleBlock = the \"{ ... }\" block\r\n      });\r\n\r\n      const docComment: tsdoc.DocComment | undefined = this._collector.fetchMetadata(astDeclaration).tsdocComment;\r\n      const releaseTag: ReleaseTag = this._collector.fetchMetadata(astDeclaration.astSymbol).releaseTag;\r\n\r\n      apiNamespace = new ApiNamespace({ name, docComment, releaseTag, excerptTokens });\r\n      parentApiItem.addMember(apiNamespace);\r\n    }\r\n\r\n    this._processChildDeclarations(astDeclaration, exportedName, apiNamespace);\r\n  }\r\n\r\n  private _processApiProperty(astDeclaration: AstDeclaration, exportedName: string | undefined,\r\n    parentApiItem: ApiItemContainerMixin): void {\r\n\r\n    const name: string = !!exportedName ? exportedName : astDeclaration.astSymbol.localName;\r\n\r\n    const isStatic: boolean = (astDeclaration.modifierFlags & ts.ModifierFlags.Static) !== 0;\r\n\r\n    const canonicalReference: string = ApiProperty.getCanonicalReference(name, isStatic);\r\n\r\n    let apiProperty: ApiProperty | undefined\r\n      = parentApiItem.tryGetMember(canonicalReference) as ApiProperty;\r\n\r\n    if (apiProperty === undefined) {\r\n      const propertyDeclaration: ts.PropertyDeclaration = astDeclaration.declaration as ts.PropertyDeclaration;\r\n\r\n      const nodesToCapture: IExcerptBuilderNodeToCapture[] = [];\r\n\r\n      const propertyTypeTokenRange: IExcerptTokenRange = ExcerptBuilder.createEmptyTokenRange();\r\n      nodesToCapture.push({ node: propertyDeclaration.type, tokenRange: propertyTypeTokenRange });\r\n\r\n      const excerptTokens: IExcerptToken[] = ExcerptBuilder.build({\r\n        startingNode: astDeclaration.declaration,\r\n        nodesToCapture\r\n      });\r\n      const docComment: tsdoc.DocComment | undefined = this._collector.fetchMetadata(astDeclaration).tsdocComment;\r\n      const releaseTag: ReleaseTag = this._collector.fetchMetadata(astDeclaration.astSymbol).releaseTag;\r\n\r\n      apiProperty = new ApiProperty({ name, docComment, releaseTag, isStatic, excerptTokens, propertyTypeTokenRange });\r\n      parentApiItem.addMember(apiProperty);\r\n    } else {\r\n      // If the property was already declared before (via a merged interface declaration),\r\n      // we assume its signature is identical, because the language requires that.\r\n    }\r\n  }\r\n\r\n  private _processApiPropertySignature(astDeclaration: AstDeclaration, exportedName: string | undefined,\r\n    parentApiItem: ApiItemContainerMixin): void {\r\n\r\n    const name: string = !!exportedName ? exportedName : astDeclaration.astSymbol.localName;\r\n    const canonicalReference: string = ApiPropertySignature.getCanonicalReference(name);\r\n\r\n    let apiPropertySignature: ApiPropertySignature | undefined\r\n      = parentApiItem.tryGetMember(canonicalReference) as ApiPropertySignature;\r\n\r\n    if (apiPropertySignature === undefined) {\r\n      const propertySignature: ts.PropertySignature = astDeclaration.declaration as ts.PropertySignature;\r\n\r\n      const nodesToCapture: IExcerptBuilderNodeToCapture[] = [];\r\n\r\n      const propertyTypeTokenRange: IExcerptTokenRange = ExcerptBuilder.createEmptyTokenRange();\r\n      nodesToCapture.push({ node: propertySignature.type, tokenRange: propertyTypeTokenRange });\r\n\r\n      const excerptTokens: IExcerptToken[] = ExcerptBuilder.build({\r\n        startingNode: astDeclaration.declaration,\r\n        nodesToCapture\r\n      });\r\n      const docComment: tsdoc.DocComment | undefined = this._collector.fetchMetadata(astDeclaration).tsdocComment;\r\n      const releaseTag: ReleaseTag = this._collector.fetchMetadata(astDeclaration.astSymbol).releaseTag;\r\n\r\n      apiPropertySignature = new ApiPropertySignature({ name, docComment, releaseTag,\r\n        excerptTokens, propertyTypeTokenRange });\r\n      parentApiItem.addMember(apiPropertySignature);\r\n    } else {\r\n      // If the property was already declared before (via a merged interface declaration),\r\n      // we assume its signature is identical, because the language requires that.\r\n    }\r\n  }\r\n\r\n  private _processApiTypeAlias(astDeclaration: AstDeclaration, exportedName: string | undefined,\r\n    parentApiItem: ApiItemContainerMixin): void {\r\n\r\n    const name: string = !!exportedName ? exportedName : astDeclaration.astSymbol.localName;\r\n\r\n    const canonicalReference: string = ApiTypeAlias.getCanonicalReference(name);\r\n\r\n    let apiTypeAlias: ApiTypeAlias | undefined = parentApiItem.tryGetMember(canonicalReference) as\r\n      ApiTypeAlias;\r\n\r\n    if (apiTypeAlias === undefined) {\r\n      const nodesToCapture: IExcerptBuilderNodeToCapture[] = [];\r\n\r\n      const excerptTokens: IExcerptToken[] = ExcerptBuilder.build({\r\n        startingNode: astDeclaration.declaration,\r\n        nodesToCapture\r\n      });\r\n      const docComment: tsdoc.DocComment | undefined = this._collector.fetchMetadata(astDeclaration).tsdocComment;\r\n      const releaseTag: ReleaseTag = this._collector.fetchMetadata(astDeclaration.astSymbol).releaseTag;\r\n\r\n      apiTypeAlias = new ApiTypeAlias({ name, docComment, releaseTag, excerptTokens });\r\n\r\n      parentApiItem.addMember(apiTypeAlias);\r\n    }\r\n  }\r\n\r\n  private _processApiVariable(astDeclaration: AstDeclaration, exportedName: string | undefined,\r\n    parentApiItem: ApiItemContainerMixin): void {\r\n\r\n    const name: string = !!exportedName ? exportedName : astDeclaration.astSymbol.localName;\r\n\r\n    const canonicalReference: string = ApiVariable.getCanonicalReference(name);\r\n\r\n    let apiVariable: ApiVariable | undefined = parentApiItem.tryGetMember(canonicalReference) as\r\n      ApiVariable;\r\n\r\n    if (apiVariable === undefined) {\r\n      const variableDeclaration: ts.VariableDeclaration = astDeclaration.declaration as ts.VariableDeclaration;\r\n\r\n      const nodesToCapture: IExcerptBuilderNodeToCapture[] = [];\r\n\r\n      const variableTypeTokenRange: IExcerptTokenRange = ExcerptBuilder.createEmptyTokenRange();\r\n      nodesToCapture.push({ node: variableDeclaration.type, tokenRange: variableTypeTokenRange });\r\n\r\n      const excerptTokens: IExcerptToken[] = ExcerptBuilder.build({\r\n        startingNode: astDeclaration.declaration,\r\n        nodesToCapture\r\n      });\r\n      const docComment: tsdoc.DocComment | undefined = this._collector.fetchMetadata(astDeclaration).tsdocComment;\r\n      const releaseTag: ReleaseTag = this._collector.fetchMetadata(astDeclaration.astSymbol).releaseTag;\r\n\r\n      apiVariable = new ApiVariable({ name, docComment, releaseTag, excerptTokens, variableTypeTokenRange });\r\n\r\n      parentApiItem.addMember(apiVariable);\r\n    }\r\n  }\r\n\r\n  private _captureParameters(nodesToCapture: IExcerptBuilderNodeToCapture[],\r\n    parameterNodes: ts.NodeArray<ts.ParameterDeclaration>): IApiParameterOptions[] {\r\n\r\n    const parameters: IApiParameterOptions[] = [];\r\n    for (const parameter of parameterNodes) {\r\n      const parameterTypeTokenRange: IExcerptTokenRange = ExcerptBuilder.createEmptyTokenRange();\r\n      nodesToCapture.push({ node: parameter.type, tokenRange: parameterTypeTokenRange });\r\n      parameters.push({\r\n        parameterName: parameter.name.getText().trim(),\r\n        parameterTypeTokenRange\r\n      });\r\n    }\r\n    return parameters;\r\n  }\r\n\r\n  private _getOverloadIndex(astDeclaration: AstDeclaration): number {\r\n    const allDeclarations: ReadonlyArray<AstDeclaration> = astDeclaration.astSymbol.astDeclarations;\r\n    if (allDeclarations.length === 1) {\r\n      return 0; // trivial case\r\n    }\r\n\r\n    let overloadIndex: number | undefined = this._cachedOverloadIndexesByDeclaration.get(astDeclaration);\r\n\r\n    if (overloadIndex === undefined) {\r\n      let nextIndex: number = 0;\r\n      for (const other of allDeclarations) {\r\n        // Filter out other declarations that are not overloads.  For example, an overloaded function can also\r\n        // be a namespace.\r\n        if (other.declaration.kind === astDeclaration.declaration.kind) {\r\n          this._cachedOverloadIndexesByDeclaration.set(other, nextIndex);\r\n          ++nextIndex;\r\n        }\r\n      }\r\n      overloadIndex = this._cachedOverloadIndexesByDeclaration.get(astDeclaration);\r\n    }\r\n\r\n    if (overloadIndex === undefined) {\r\n      // This should never happen\r\n      throw new Error('Error calculating overload index for declaration');\r\n    }\r\n\r\n    return overloadIndex;\r\n  }\r\n}\r\n"]}