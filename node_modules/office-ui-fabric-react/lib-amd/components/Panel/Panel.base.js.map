{"version":3,"file":"Panel.base.js","sourceRoot":"../src/","sources":["components/Panel/Panel.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { IconButton } from '../../Button';\nimport { Layer } from '../../Layer';\nimport { Overlay } from '../../Overlay';\nimport { Popup } from '../../Popup';\nimport { getTheme, IconFontSizes, IProcessedStyleSet } from '../../Styling';\nimport {\n  allowScrollOnElement,\n  BaseComponent,\n  classNamesFunction,\n  divProperties,\n  elementContains,\n  getId,\n  getNativeProps,\n  getRTL\n} from '../../Utilities';\nimport { FocusTrapZone } from '../FocusTrapZone/index';\nimport { IPanel, IPanelProps, IPanelStyleProps, IPanelStyles, PanelType } from './Panel.types';\n\nconst getClassNames = classNamesFunction<IPanelStyleProps, IPanelStyles>();\n\nexport interface IPanelState {\n  isFooterSticky?: boolean;\n  isAnimating?: boolean;\n  id?: string;\n}\n\nexport class PanelBase extends BaseComponent<IPanelProps, IPanelState> implements IPanel {\n  public static defaultProps: IPanelProps = {\n    isHiddenOnDismiss: false,\n    isOpen: false,\n    isBlocking: true,\n    hasCloseButton: true,\n    type: PanelType.smallFixedFar\n  };\n\n  private _panel = React.createRef<HTMLDivElement>();\n  private _classNames: IProcessedStyleSet<IPanelStyles>;\n  private _scrollableContent: HTMLDivElement | null;\n  private _isOpen: boolean;\n\n  constructor(props: IPanelProps) {\n    super(props);\n\n    this._warnDeprecations({\n      ignoreExternalFocusing: 'focusTrapZoneProps',\n      forceFocusInsideTrap: 'focusTrapZoneProps',\n      firstFocusableSelector: 'focusTrapZoneProps'\n    });\n    this._isOpen = !!props.isOpen;\n\n    this.state = {\n      isFooterSticky: false,\n      isAnimating: false,\n      id: getId('Panel')\n    };\n  }\n\n  public componentDidMount(): void {\n    this._events.on(window, 'resize', this._updateFooterPosition);\n\n    if (this._shouldListenForOuterClick(this.props)) {\n      this._events.on(document.body, 'mousedown', this._dismissOnOuterClick, true);\n    }\n\n    if (this.props.isOpen) {\n      this.open();\n    }\n  }\n\n  public componentDidUpdate(previousProps: IPanelProps): void {\n    const shouldListenOnOuterClick = this._shouldListenForOuterClick(this.props);\n    const previousShouldListenOnOuterClick = this._shouldListenForOuterClick(previousProps);\n\n    if (shouldListenOnOuterClick && !previousShouldListenOnOuterClick) {\n      this._events.on(document.body, 'mousedown', this._dismissOnOuterClick, true);\n    } else if (!shouldListenOnOuterClick && previousShouldListenOnOuterClick) {\n      this._events.off(document.body, 'mousedown', this._dismissOnOuterClick, true);\n    }\n  }\n\n  public componentWillReceiveProps(newProps: IPanelProps): void {\n    if (newProps.isOpen !== this._isOpen) {\n      if (newProps.isOpen) {\n        this.open();\n      } else {\n        this.dismiss();\n      }\n    }\n  }\n\n  public render(): JSX.Element | null {\n    const {\n      className = '',\n      elementToFocusOnDismiss,\n      firstFocusableSelector,\n      focusTrapZoneProps,\n      forceFocusInsideTrap,\n      hasCloseButton,\n      headerText,\n      headerClassName = '',\n      ignoreExternalFocusing,\n      isBlocking,\n      isFooterAtBottom,\n      isLightDismiss,\n      isHiddenOnDismiss,\n      layerProps,\n      type,\n      styles,\n      theme,\n      customWidth,\n      onLightDismissClick = this._onPanelClick,\n      onRenderNavigation = this._onRenderNavigation,\n      onRenderHeader = this._onRenderHeader,\n      onRenderBody = this._onRenderBody,\n      onRenderFooter = this._onRenderFooter\n    } = this.props;\n    const { isFooterSticky, isAnimating, id } = this.state;\n    const isLeft = type === PanelType.smallFixedNear || type === PanelType.customNear ? true : false;\n    const isRTL = getRTL();\n    const isOnRightSide = isRTL ? isLeft : !isLeft;\n    const headerTextId = headerText && id + '-headerText';\n    const customWidthStyles = type === PanelType.custom || type === PanelType.customNear ? { width: customWidth } : {};\n    const nativeProps = getNativeProps(this.props, divProperties);\n\n    const isOpen = this._isOpen;\n\n    if (!isOpen && !isAnimating && !isHiddenOnDismiss) {\n      return null;\n    }\n\n    this._classNames = getClassNames(styles!, {\n      theme: theme!,\n      className,\n      focusTrapZoneClassName: focusTrapZoneProps ? focusTrapZoneProps.className : undefined,\n      hasCloseButton,\n      headerClassName,\n      isAnimating,\n      isFooterAtBottom,\n      isFooterSticky,\n      isOnRightSide,\n      isOpen,\n      isHiddenOnDismiss,\n      type\n    });\n\n    const { _classNames } = this;\n\n    let overlay;\n    if (isBlocking && isOpen) {\n      overlay = <Overlay className={_classNames.overlay} isDarkThemed={false} onClick={isLightDismiss ? onLightDismissClick : undefined} />;\n    }\n\n    const header = onRenderHeader(this.props, this._onRenderHeader, headerTextId);\n\n    return (\n      <Layer {...layerProps}>\n        <Popup\n          role=\"dialog\"\n          aria-modal=\"true\"\n          ariaLabelledBy={header ? headerTextId : undefined}\n          onDismiss={this.dismiss}\n          className={_classNames.hiddenPanel}\n        >\n          <div aria-hidden={!isOpen && isAnimating} {...nativeProps} ref={this._panel} className={_classNames.root}>\n            {overlay}\n            <FocusTrapZone\n              ignoreExternalFocusing={ignoreExternalFocusing}\n              forceFocusInsideTrap={!isBlocking || (isHiddenOnDismiss && !isOpen) ? false : forceFocusInsideTrap}\n              firstFocusableSelector={firstFocusableSelector}\n              isClickableOutsideFocusTrap={true}\n              {...focusTrapZoneProps}\n              className={_classNames.main}\n              style={customWidthStyles}\n              elementToFocusOnDismiss={elementToFocusOnDismiss}\n            >\n              <div className={_classNames.commands} data-is-visible={true}>\n                {onRenderNavigation(this.props, this._onRenderNavigation)}\n              </div>\n              <div className={_classNames.contentInner}>\n                {header}\n                <div ref={this._allowScrollOnPanel} className={_classNames.scrollableContent} data-is-scrollable={true}>\n                  {onRenderBody(this.props, this._onRenderBody)}\n                </div>\n                {onRenderFooter(this.props, this._onRenderFooter)}\n              </div>\n            </FocusTrapZone>\n          </div>\n        </Popup>\n      </Layer>\n    );\n  }\n\n  public open() {\n    if (!this._isOpen) {\n      this._isOpen = true;\n      this.setState(\n        {\n          isAnimating: true\n        },\n        () => {\n          this._async.setTimeout(this._onTransitionComplete, 200);\n        }\n      );\n\n      if (this.props.onOpen) {\n        this.props.onOpen();\n      }\n    }\n  }\n\n  public dismiss = (ev?: React.SyntheticEvent<HTMLElement>): void => {\n    if (this._isOpen) {\n      this._isOpen = false;\n      if (this.props.onDismiss) {\n        this.props.onDismiss(ev);\n      }\n\n      if (!ev || (ev && !ev.defaultPrevented)) {\n        this.setState(\n          {\n            isAnimating: true\n          },\n          () => {\n            this._async.setTimeout(this._onTransitionComplete, 200);\n          }\n        );\n      }\n    }\n  };\n\n  // Allow the user to scroll within the panel but not on the body\n  private _allowScrollOnPanel = (elt: HTMLDivElement | null): void => {\n    if (elt) {\n      allowScrollOnElement(elt, this._events);\n    } else {\n      this._events.off(this._scrollableContent);\n    }\n    this._scrollableContent = elt;\n  };\n\n  private _shouldListenForOuterClick(props: IPanelProps): boolean {\n    return !!props.isBlocking && !!props.isOpen;\n  }\n\n  private _onRenderNavigation = (props: IPanelProps): JSX.Element | null => {\n    if (!this.props.onRenderNavigationContent && !this.props.onRenderNavigation && !this.props.hasCloseButton) {\n      return null;\n    }\n    const { onRenderNavigationContent = this._onRenderNavigationContent } = this.props;\n    return <div className={this._classNames.navigation}>{onRenderNavigationContent(props, this._onRenderNavigationContent)}</div>;\n  };\n\n  private _onRenderNavigationContent = (props: IPanelProps): JSX.Element | null => {\n    const { closeButtonAriaLabel, hasCloseButton } = props;\n    const theme = getTheme();\n    if (hasCloseButton) {\n      // TODO -Issue #5689: Comment in once Button is converted to mergeStyles\n      // const iconButtonStyles = this._classNames.subComponentStyles\n      // ? (this._classNames.subComponentStyles.iconButton as IStyleFunctionOrObject<IButtonStyleProps, IButtonStyles>)\n      // : undefined;\n      return (\n        <IconButton\n          // TODO -Issue #5689: Comment in once Button is converted to mergeStyles\n          // className={iconButtonStyles}\n          styles={{\n            root: {\n              height: 'auto',\n              width: '44px',\n              color: theme.palette.neutralSecondary,\n              fontSize: IconFontSizes.large\n            },\n            rootHovered: {\n              color: theme.palette.neutralPrimary\n            }\n          }}\n          className={this._classNames.closeButton}\n          onClick={this._onPanelClick}\n          ariaLabel={closeButtonAriaLabel}\n          title={closeButtonAriaLabel}\n          data-is-visible={true}\n          iconProps={{ iconName: 'Cancel' }}\n        />\n      );\n    }\n    return null;\n  };\n\n  private _onRenderHeader = (\n    props: IPanelProps,\n    defaultRender?: (props?: IPanelProps) => JSX.Element | null,\n    headerTextId?: string | undefined\n  ): JSX.Element | null => {\n    const { headerText } = props;\n\n    if (headerText) {\n      return (\n        <div className={this._classNames.header}>\n          <p className={this._classNames.headerText} id={headerTextId} role=\"heading\" aria-level={2}>\n            {headerText}\n          </p>\n        </div>\n      );\n    }\n    return null;\n  };\n\n  private _onRenderBody = (props: IPanelProps): JSX.Element => {\n    return <div className={this._classNames.content}>{props.children}</div>;\n  };\n\n  private _onRenderFooter = (props: IPanelProps): JSX.Element | null => {\n    const { onRenderFooterContent = null } = this.props;\n    if (onRenderFooterContent) {\n      return (\n        <div className={this._classNames.footer}>\n          <div className={this._classNames.footerInner}>{onRenderFooterContent()}</div>\n        </div>\n      );\n    }\n    return null;\n  };\n\n  private _updateFooterPosition(): void {\n    const scrollableContent = this._scrollableContent;\n    if (scrollableContent) {\n      const height = scrollableContent.clientHeight;\n      const innerHeight = scrollableContent.scrollHeight;\n\n      this.setState({\n        isFooterSticky: height < innerHeight ? true : false\n      });\n    }\n  }\n\n  private _dismissOnOuterClick(ev: any): void {\n    const panel = this._panel.current;\n    if (this._isOpen && panel) {\n      if (!elementContains(panel, ev.target)) {\n        if (this.props.onOuterClick) {\n          this.props.onOuterClick();\n          ev.preventDefault();\n        } else {\n          this.dismiss();\n        }\n      }\n    }\n  }\n\n  private _onPanelClick = (ev?: any): void => {\n    this.dismiss(ev);\n  };\n\n  private _onTransitionComplete = (): void => {\n    this._updateFooterPosition();\n    this.setState({\n      isAnimating: false\n    });\n\n    if (this._isOpen && this.props.onOpened) {\n      this.props.onOpened();\n    }\n\n    if (!this._isOpen && this.props.onDismissed) {\n      this.props.onDismissed();\n    }\n  };\n}\n"]}